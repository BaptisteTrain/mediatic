<main class="container">
	<div class="row" ng-controller="PaginationCtrl as paginationCtrl">
		<div class="col-xs-12">
			<h2>Fiche adh&eacute;rent</h2>
			<hr/>
			<!--div class="alert alert-success alert-dismissible" role="alert">
				<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				La Fiche de l'<strong>Adhérent</strong> a été mise à jour.
			</div-->
			
			<!-- Messages -->
			<div ng-show="mbshCtrl.varTest" ng-class="{fade: mbshCtrl.doFade}" class="alert alert-success alert-dismissible">Test</div>
			<div ng-show="showSuccessEdit" ng-class="{fade:doFade}" class="alert alert-success alert-dismissible">OK</div>
			<div ng-show="showErrorEdit" ng-class="{fade:doFade}" class="alert alert-danger alert-dismissible">Erreur</div>
			
			<!-- / Messages -->
			
			<div class="formulaire">
				<form name="MemberSheetForm" class="form-horizontal" ng-submit="mbshCtrl.setMemberSheet()" novalidate>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2" for="lastname">Nom&nbsp;<span class="text-danger">*</span></label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<input type="text" class="form-control" id="lastname" name="lastname" ng-model="mbshCtrl.lastname" placeholder="Nom" ng-required="true">
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2" for="firstname">Pr&eacute;nom&nbsp;<span class="text-danger">*</span></label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<input type="text" class="form-control" id="firstname" name="firstname" ng-model="mbshCtrl.firstname" placeholder="Pr&eacute;nom" ng-required="true">
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2" for="birthdate">Date de naissance&nbsp;<span class="text-danger">*</span></label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<input type="date" class="form-control" id="birthdate" name="birthdate" ng-model="mbshCtrl.birthdate" placeholder="Date de naissance (AAAA-MM-JJ)" ng-required="true">
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2" for="age">Age</label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<input type="text" class="form-control" id="age" name="age" ng-model="mbshCtrl.age" placeholder="Age" readonly>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2" for="email">E-mail&nbsp;<span class="text-danger">*</span></label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<input type="email" class="form-control" id="email" name="email" ng-model="mbshCtrl.email" placeholder="E-mail (exemple@exemple.com)" ng-required="true">
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2" for="address">Adresse</label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<input type="text" class="form-control" id="address" name="address" ng-model="mbshCtrl.address" placeholder="Adresse">
					    </div>
					</div>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2">&nbsp;</label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
				            <div class="form-group row">
				                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
				                    <input type="text" class="form-control" id="postalcode" name="postalcode" ng-model="mbshCtrl.postalcode" placeholder="Code postal">
				                </div>
				                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
				                    <input type="text" class="form-control" id="town" name="town" ng-model="mbshCtrl.town" placeholder="Ville">
				                </div>
				            </div>
				        </div>
					</div>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2"
							for="gender">Genre</label>
						<div class="col-xs-1 col-sm-1 col-md-1">
							<div class="radio">
								<label><input type="radio" name="gender" placeholder="gender" value="Homme" checked="checked">Homme</label>
								<label><input type="radio" name="gender" placeholder="gender" value="Femme">Femme</label>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2" for="subscriptionAmount">Cotisation</label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<div class="input-group">
								<span class="input-group-addon" id="basic-addon1">€</span>
								<input type="number" class="form-control" id="subscriptionAmount" name="subscriptionAmount" ng-model="mbshCtrl.subscriptionAmount" placeholder="Montant">
								<span class="input-group-addon" id="basic-addon2">.00</span>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2" for="subscriptionDate">Date de cotisation</label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<input type="date" class="form-control" id="subscriptionDate" name="subscriptionDate" ng-model="mbshCtrl.subscriptionDate" placeholder="Date de cotisation" readonly>
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-offset-4 col-md-offset-2 col-lg-offset-2 col-xs-12 col-sm-4 col-md-5 col-lg-5">
							<button type="button" class="btn btn-default hidden-xs" ng-click="mbshCtrl.returnToSearch()">Retour</button>
							<button type="submit" class="btn btn-success pull-right hidden-xs" ng-disabled="MemberSheetForm.$invalid">Modifier</button>
							
							<!-- Boutons de la Version mobile -->
							<div class="btn-group btn-group-justified" role="group" aria-label="...">
								<div class="btn-group" role="group">
									<button type="button" class="btn btn-default visible-xs-inline-block" ng-click="mbshCtrl.returnToSearch()"><span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span></button>
								</div>
								<div class="btn-group" role="group">
									<button type="submit" class="btn btn-success visible-xs-inline-block" ng-disabled="MemberSheetForm.$invalid"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></button>
								</div>
							</div>
						</div>
					</div>
					
					<!-- Gestion des erreurs de saisie dans le formulaire -->
						<div ng-show="MemberSheetForm.$dirty && MemberSheetForm.$invalid" class="alert alert-danger" role="alert">
							<span>Le Formulaire est invalide:</span><br/>
							<span ng-show="MemberSheetForm.lastname.$dirty && MemberSheetForm.lastname.$error.required">- Le Nom est requis.<br/></span>
							<span ng-show="MemberSheetForm.firstname.$dirty && MemberSheetForm.firstname.$error.required">- Le Pr&eacute;nom est requis.<br/></span>
							<span ng-show="MemberSheetForm.birthdate.$dirty && MemberSheetForm.birthdate.$invalid">- La Date de naissance est mal-form&eacute;e: elle doit être de la forme: 'AAAA-MM-JJ'.<br/></span>
							<span ng-show="MemberSheetForm.birthdate.$dirty && MemberSheetForm.birthdate.$error.required">- La Date de naissance est requise.<br/></span>
							<span ng-show="MemberSheetForm.email.$dirty && MemberSheetForm.email.$invalid">- L'E-mail est mal-form&eacute;. Il doit être de la forme: 'exemple@exemple.com'.<br/></span>
							<span ng-show="MemberSheetForm.email.$error.required">- L'E-mail est requis.<br/></span>
						</div>
					<!-- / -->
				</form>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12" ng-show="mbshCtrl.loans.length">
			<h2>Emprunts</h2>
			<table class="table table-striped table-hover" ts-wrapper ts-no-data-text="Aucun r&eacute;sultat">
				<thead>
					<tr>
						<th ts-criteria="media.id" ts-default class="col-sm-1">R&eacute;f</th>
						<th ts-criteria="media.titre" class="col-sm-4">Titre</th>
						<th ts-criteria="media.auteur" class="col-sm-2">Auteur</th>
						<th ts-criteria="media.type" class="col-sm-1">Type</th>
						<th ts-criteria="depart" class="col-sm-2">Date d'emprunt</th>
						<th ts-criteria="retour" class="col-sm-2">Jours restants</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="loan in mbshCtrl.loans | paginationFilter:paginationCtrl.currentPage:mbshCtrl.itemsPerPage" ts-repeat>
						<td ng-bind="loan.media.id"></td>
						<td ng-bind="loan.media.titre"></td>
						<td ng-bind="loan.media.auteur"></td>
						<td ng-bind="loan.media.type"></td>
						<td ng-bind="loan.depart | date: 'dd/MM/yyyy'"></td>
						<td ng-bind="loan.retour | remainingDays"></td>
					</tr>
				</tbody>
			</table>
			<!-- PAGINATION -->
			<div class="paginationElement">
				<div uib-pagination	boundary-links="true" 
							total-items="mbshCtrl.loans.length" 
							items-per-page="mbshCtrl.itemsPerPage" 
							ng-model="paginationCtrl.currentPage" 
							max-size="paginationCtrl.maxSize" 
							previous-text="&lsaquo;" 
							next-text="&rsaquo;" 
							first-text="&laquo;" 
							last-text="&raquo;"
							style="margin: auto;">
				</div>
			</div>
		</div>
	</div>

	<!-- Formulaire de Recherche et d'Ajout d'Emprunts (Matthieu) -->

	<div class="row">
		<aside class="col-xs-12">
			<h2>R&eacute;aliser un emprunt<span class="glyphicon glyphicon-menu-down pull-right" aria-hidden="true" data-toggle="collapse" data-target="#emprunt" ng-click="isNavCollapsed = !isNavCollapsed"></span></h2>
			<hr/>
			<div id="emprunt" class="collapse" uib-collapse="!isNavCollapsed">
				<form name="MemberLoanSearchForm" id="rechercheEmprunt" class="form-horizontal" ng-submit="mbshCtrl.getMedias()" novalidate>
					<div class="form-group">
						<label for="idIdentifiant" class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2">Identifiant</label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<input type="text" class="form-control" id="idIdentifier" name="identier" ng-model="mbshCtrl.identifier" placeholder="Identifiant">
						</div>
					</div>
					<div class="form-group">
						<label for="idTitre" class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2">Titre</label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<input type="text" class="form-control" id="idTitle" name="title" ng-model="mbshCtrl.title" placeholder="Titre">
						</div>
					</div>
					<div class="form-group">
						<label for="idAuteur" class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2">Auteur</label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<input type="text" class="form-control" id="idAuthor" name="author" ng-model="mbshCtrl.author" placeholder="Auteur">
						</div>
					</div>
					<div class="form-group">
						<label for="idType" class="control-label col-xs-12 col-sm-3 col-md-2 col-lg-2">Type</label>
						<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
							<select id="idType" name="type" ng-model="mbshCtrl.type" class="form-control">
								<option id="idTous" value=""></option>
								<option id="idLivre" value="Livre">Livre</option>
								<option id="idCD" value="CD">CD</option>
								<option id="idDVD" value="DVD">DVD</option>
							</select>
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-offset-4 col-md-offset-2 col-lg-offset-2 col-xs-12 col-sm-4 col-md-5 col-lg-5">
							<button type="submit" class="btn btn-success hidden-xs">Rechercher</button>
							
							<!-- Bouton de la Version mobile -->
							<div class="btn-group btn-group-justified" role="group" aria-label="...">
								<div class="btn-group" role="group">
									<button type="submit" class="btn btn-success visible-xs-inline-block"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
								</div>
							</div>
							
						</div>
					</div>
				</form>
				<hr/>
				<form name="MemberLoanAddForm" id="validEmprunt" class="form-horizontal" ng-submit="mbshCtrl.AddLoan()" ng-show="mbshCtrl.medias.length" novalidate>
					<table class="table table-striped table-hover" ts-wrapper ts-no-data-text="Aucun r&eacute;sultat">
						<thead>
							<tr>
								<th ts-criteria="id" ts-default class="col-sm-1">R&eacute;f</th>
								<th ts-criteria="titre" class="col-sm-4">Titre</th>
								<th ts-criteria="auteur" class="col-sm-2">Auteur</th>
								<th ts-criteria="type" class="col-sm-4">Type</th>
								<th class="col-xs-1"><!--span class="glyphicon glyphicon-pencil" aria-hidden="true"></span--></th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="media in mbshCtrl.medias | paginationFilter:paginationCtrl.currentPage:mbshCtrl.itemsPerPage" ts-repeat>
								<td ng-bind="media.id"></td>
								<td ng-bind="media.titre"></td>
								<td ng-bind="media.auteur"></td>
								<td ng-bind="media.type"></td>
								<td class="form-group"><input type="radio" id="media_{{media.id}}" name="media.select" ng-model="mbshCtrl.idMedia" value="{{media.id}}" ng-required="true"/></td>
							</tr>
						</tbody>
					</table>
					<!-- PAGINATION -->
					<div class="paginationElement">
						<div uib-pagination	boundary-links="true" 
									total-items="mbshCtrl.medias.length" 
									items-per-page="mbshCtrl.itemsPerPage" 
									ng-model="paginationCtrl.currentPage" 
									max-size="paginationCtrl.maxSize" 
									previous-text="&lsaquo;" 
									next-text="&rsaquo;" 
									first-text="&laquo;" 
									last-text="&raquo;"
									style="margin: auto;">
						</div>
					</div>
					<!-- / PAGINATION -->
					<div class="form-group">
						<div class="col-xs-12 col-sm-4 col-md-5 col-lg-5">
							<button type="submit" class="btn btn-success hidden-xs" ng-disabled="MemberLoanAddForm.$invalid">Ajouter un m&eacute;dia</button>
							
							<!-- Bouton de la Version mobile -->
							<div class="btn-group btn-group-justified" role="group" aria-label="...">
								<div class="btn-group" role="group">
									<button type="submit" class="btn btn-success visible-xs-inline-block" ng-disabled="MemberLoanAddForm.$invalid"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span></button>
								</div>
							</div>
						</div>
					</div>
				</form>
				<hr/>
			</div>
		</aside>
	</div>
</main>